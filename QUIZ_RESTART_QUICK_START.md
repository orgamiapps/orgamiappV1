# Quiz Restart Feature - Quick Start Guide ğŸ”„

## How to Restart a Quiz

### Step-by-Step Instructions

#### 1ï¸âƒ£ **Complete Your Quiz**
```
Run your quiz normally until it ends
  â†“
All questions answered
  â†“
Final leaderboard shown
  â†“
Quiz status changes to "ENDED"
```

#### 2ï¸âƒ£ **Find the Restart Button**
```
Host Control Panel
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Start Quiz]  (if draft)      â”‚
â”‚  OR                            â”‚
â”‚  [Restart Quiz]  (if ended) â† â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

The restart button appears **only when the quiz has ended**.

#### 3ï¸âƒ£ **Choose Restart Mode**

When you click "Restart Quiz", you'll see this dialog:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ”„  Restart Quiz                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                    â•‘
â•‘  How would you like to restart?   â•‘
â•‘                                    â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ âœ¨ Fresh Start                â”‚ â•‘
â•‘  â”‚                               â”‚ â•‘
â•‘  â”‚ Remove all participants and   â”‚ â•‘
â•‘  â”‚ responses. Start completely   â”‚ â•‘
â•‘  â”‚ fresh.                     â†’ â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                                    â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ ğŸ‘¥ Keep Participants          â”‚ â•‘
â•‘  â”‚                               â”‚ â•‘
â•‘  â”‚ Keep current participants in  â”‚ â•‘
â•‘  â”‚ lobby. Reset their scores and â”‚ â•‘
â•‘  â”‚ responses.                 â†’ â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                                    â•‘
â•‘                      [Cancel]      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

#### 4ï¸âƒ£ **Select Your Option**

**Option A: Fresh Start** âœ¨
- Best for: Running quiz with different groups
- Effect:
  - All participants removed
  - Lobby is empty
  - New people can join
  - Previous data archived
  
**Option B: Keep Participants** ğŸ‘¥
- Best for: Replay with same group
- Effect:
  - Participants stay in lobby
  - Scores reset to 0
  - Ready to play again
  - Previous data archived

#### 5ï¸âƒ£ **Wait for Processing**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â³ Restarting quiz...  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
Takes 1-2 seconds

#### 6ï¸âƒ£ **Quiz Restarted! ğŸ‰**
```
âœ… Success Message Shown
  â†“
Quiz returns to DRAFT status
  â†“
Waiting Lobby appears
  â†“
Ready for new session!
```

---

## Visual Flow Diagram

```
                    Quiz Ended
                        â”‚
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Restart Quiz   â”‚â—„â”€â”€ Click Here
              â”‚     Button      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Restart Dialog         â”‚
        â”‚                          â”‚
        â”‚  Choose Mode:            â”‚
        â”‚  â€¢ Fresh Start           â”‚
        â”‚  â€¢ Keep Participants     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                â”‚
           â–¼                â–¼
    Fresh Start      Keep Participants
           â”‚                â”‚
           â”‚                â”‚
    Remove All       Reset Scores
    Participants     Keep People
           â”‚                â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Processing   â”‚
            â”‚   1-2 seconds  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚    Success!    â”‚
            â”‚   Quiz Reset   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Waiting Lobby  â”‚
            â”‚   Appears!     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## When to Use Each Mode

### ğŸ†• Fresh Start

**Use When:**
- âœ… Running quiz for different groups throughout the day
- âœ… Starting a completely new session
- âœ… Want to clear all previous participants
- âœ… Running competitive tournaments (new bracket)

**Example Scenario:**
```
Morning Session:
- 20 students take quiz
- Session ends at 10:00 AM

Afternoon Session (Fresh Start):
- Previous students removed
- New 15 students join
- Clean slate for afternoon group
```

### ğŸ‘¥ Keep Participants

**Use When:**
- âœ… Same group wants to replay
- âœ… Practice round before real quiz
- âœ… Learning session (try again to improve)
- âœ… Fixed technical issue and want to continue

**Example Scenario:**
```
Practice Round:
- 10 team members take quiz
- Want to try again with same people

Replay (Keep Participants):
- Same 10 people stay in lobby
- Scores reset to zero
- Everyone tries to beat their previous score
```

---

## What Happens to Data?

### Data Archival (Not Deletion!)

#### Previous Participant Data
```dart
// Fresh Start Mode
{
  "isActive": false,          // Marked inactive
  "archivedAt": "2025-10-26", // Timestamp added
  // All other data preserved
}

// Keep Participants Mode
{
  "currentScore": 0,          // Reset
  "questionsAnswered": 0,     // Reset
  "correctAnswers": 0,        // Reset
  "currentRank": null,        // Cleared
  "bestRank": null,           // Cleared
  // Still active in lobby
}
```

#### Previous Responses
```dart
{
  "archived": true,           // Marked as archived
  "archivedAt": "2025-10-26", // Timestamp added
  // All response data preserved
}
```

**Important:** Nothing is permanently deleted! All data is archived for historical analysis.

---

## User Experience

### What Participants See

#### Fresh Start Mode
```
Previous Participant:
  â†“
Quiz ended
  â†“
Host restarts (Fresh Start)
  â†“
Participant's session ends
  â†“
Must join again as new participant
```

#### Keep Participants Mode
```
Participant:
  â†“
Quiz ended (see results)
  â†“
Host restarts (Keep Participants)
  â†“
Automatically return to waiting lobby
  â†“
Score shows 0
  â†“
Ready to play again!
```

---

## Testing Guide

### Test Scenario 1: Fresh Start
```
1. Complete a quiz with 5 participants
2. Click "Restart Quiz"
3. Select "Fresh Start"
4. âœ… Verify: Lobby is empty
5. âœ… Verify: Participant count shows 0
6. âœ… Verify: Previous participants can join as new
7. âœ… Verify: Old responses archived in database
```

### Test Scenario 2: Keep Participants
```
1. Complete a quiz with 5 participants
2. Click "Restart Quiz"  
3. Select "Keep Participants"
4. âœ… Verify: 5 participants still in lobby
5. âœ… Verify: All scores show 0
6. âœ… Verify: Participants see waiting lobby
7. âœ… Verify: Can start quiz immediately
8. âœ… Verify: Old responses archived in database
```

### Test Scenario 3: Multiple Restarts
```
1. Complete quiz
2. Restart (Fresh Start)
3. Run quiz again
4. Restart (Keep Participants)
5. Run quiz again
6. âœ… Verify: Each session data properly archived
7. âœ… Verify: No data conflicts
8. âœ… Verify: Performance remains good
```

---

## Troubleshooting

### Issue: Restart button not showing
**Solution:**
- Ensure quiz status is "ended"
- Check you're logged in as host
- Refresh the page
- Check console for errors

### Issue: "Restarting quiz..." stuck
**Solution:**
- Check internet connection
- Wait 30 seconds
- If still stuck, refresh page
- Try restart again

### Issue: Participants not reset correctly
**Solution:**
- Verify you selected correct mode
- Check Firestore console for data
- Look for archived responses
- Contact support if data integrity issue

### Issue: Error message on restart
**Solution:**
- Check host permissions
- Verify quiz ID is valid
- Check Firestore rules
- Review error logs

---

## Best Practices

### ğŸ“‹ Before Restart
- âœ… Announce to participants you're restarting
- âœ… Decide which mode you need
- âœ… Save/export results if needed
- âœ… Ensure stable internet connection

### ğŸ¯ During Restart
- âœ… Wait for success message
- âœ… Don't close the app
- âœ… Don't click multiple times
- âœ… Verify participant count after

### âœ¨ After Restart
- âœ… Confirm quiz is in draft state
- âœ… Check waiting lobby appears
- âœ… Inform participants they can join/rejoin
- âœ… Start when ready

---

## FAQ

**Q: Can I undo a restart?**
A: No, but all previous data is archived, not deleted. You can view historical data.

**Q: How many times can I restart?**
A: Unlimited! Restart as many times as needed.

**Q: Do participants lose their history?**
A: Their previous scores are archived. They start fresh each restart.

**Q: Can I restart during a live quiz?**
A: No, end the quiz first, then restart.

**Q: What happens to leaderboard?**
A: Leaderboard resets. Previous leaderboards are archived.

**Q: Can participants see their archived data?**
A: Not currently in the UI, but data exists in database for host analysis.

**Q: Does restart affect questions?**
A: No, all questions remain the same.

**Q: Can I change questions after restart?**
A: Yes! Quiz returns to draft, so you can edit questions.

---

## Success Indicators

After a successful restart, you should see:

âœ… **Success toast message**
âœ… **Quiz status badge shows "DRAFT"**
âœ… **Waiting lobby appears**
âœ… **Participant counter shows correct number**
âœ… **"Start Quiz" button available**
âœ… **Questions intact and ready**

---

## Summary

The restart feature allows hosts to:
- ğŸ”„ Run the same quiz multiple times
- ğŸ‘¥ Choose whether to keep participants
- ğŸ“Š Preserve all historical data
- âš¡ Quick and easy process (2 seconds)
- ğŸ¯ Perfect for repeated sessions

**Two Modes:**
1. **Fresh Start**: New participants, clean slate
2. **Keep Participants**: Same group, reset scores

**Key Points:**
- Nothing is permanently deleted
- Choose mode based on use case
- Takes only 1-2 seconds
- Unlimited restarts allowed
- Data safely archived

---

**Ready to restart your first quiz? Follow the steps above and enjoy the flexibility of running multiple quiz sessions!** ğŸš€âœ¨

---

**Need Help?**
- Check console logs for errors
- Verify host permissions
- Review Firestore data
- Contact support team
